<!--filter code-->
<br><br><br><br>
<div class="container mt-4">
  <form [formGroup]="form" (ngSubmit)="onSubmit()" class="row g-3">
    <div class="col-md-4 mb-3">
      <label for="country" class="form-label">Country:</label>
      <input type="text" id="country" formControlName="country" class="form-control">
    </div>

    <div class="col-md-4 mb-3">
      <label for="state" class="form-label">State:</label>
      <input type="text" id="state" formControlName="state" class="form-control">
    </div>

    <div class="col-md-4 mb-3">
      <label for="city" class="form-label">City:</label>
      <input type="text" id="city" formControlName="city" class="form-control">
    </div>

    <div class="col-12 text-center">
      <button type="submit" class="btn btn-primary">Submit</button>
    </div>
  </form>
</div>
  
  
  
  
<!--placing tool in market-->
<div>
    <div id="post-bar">
        <div class="dropdown-container">
            <button class="btn btn-primary" (click)="toggleDropdown()" id="dropdown-button">Place</button>
            <div class="dropdown-content mt-2" id="dropdown-content"
                [style.display]="isDropdownOpen ? 'block' : 'none'" style="max-height: 400px; overflow-y: auto;">
                <form>
                    <div class="form-group">
                        <input class="form-control" type="text" id="name" placeholder="Name of tool"
                            [(ngModel)]="formData.name" name="name" required>
                    </div>
                    <div class="form-group">
                        <Label>Year of Parchase:</Label><input class="form-control" type="date" id="name" placeholder="title"
                            [(ngModel)]="formData.year" name="year" required>
                    </div>
                    <div class="form-group">
                        <label>Contact Number:</label>
                        <input class="form-control" type="tel" id="name" placeholder="Name"
                            [(ngModel)]="formData.contact" pattern="[0-9]{3}-[0-9]{3}-[0-9]{4}" placeholder="123-456-7890" name="contact" required>
                    </div>
                    <div class="form-group">
                        <label>Upload picture of tool</label><input class="form-control" type="file" id="picture" (change)="handleUpload($event)"
                            name="picture" accept="image/*" required>
                    </div>
                    <div class="form-group">
                        <label>D/No & Street:</label><input class="form-control" type="text" id="address" name="address" pattern="[0-9]{3}-[0-9]{3}-[0-9]{4}" placeholder="D/No & Street" required>
                        <input class="form-control" type="text" id="name" placeholder="D/No & Street"
                            [(ngModel)]="formData.address" name="address" required>
                    </div>
                    <div class="form-group">
                        <input class="form-control" type="text" id="address" placeholder="CITY"
                            [(ngModel)]="formData.region" name="region" required>
                    </div>
                    <div class="form-group">
                        <input class="form-control" type="text" id="address" placeholder="state"
                            [(ngModel)]="formData.state" name="state" required>
                    </div>
                      
                    <div class="form-group">
                        <input class="form-control" type="text" id="address" placeholder="country"
                            [(ngModel)]="formData.country" name="country" required>
                    </div>
                    <div class="form-group">
                        <textarea class="form-control" id="description" name="description" rows="4"
                            placeholder="About tool" [(ngModel)]="formData.description" required></textarea>
                    </div>
                    <div class="form-group">
                        <button type="submit" class="btn btn-success" id="place_submit"
                            (click)="submitForm()" [disabled]="createPostBtnLoader">Submit
                        <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true" *ngIf="createPostBtnLoader"></span>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<div class="container mt-4">
  <div *ngIf="posts.length > 0; else noDataMessage" >
  <div *ngFor="let post of posts; let i = index" class="card mb-4">
    <div class="row no-gutters">
      <div class="col-md-4">
        <img [src]="post.picture" class="card-img" alt="Post Image">
      </div>
      <div class="col-md-8">
        <div class="card-body">
          <h5 class="card-title">{{ post.name }}</h5>
          <p class="card-text"><strong>Year of Purchase:</strong> {{ post.year }}</p>
          <p class="card-text"><strong>Contact Number:</strong> {{ post.contact }}</p>

          <div class="row">
            <div class="col-md-6">
              <p class="card-text"><strong>Address:</strong> {{ post.address }}</p>
            </div>
            <div class="col-md-6">
              <p class="card-text"><strong>Region:</strong> {{ post.region }}</p>
              <p class="card-text"><strong>State:</strong> {{ post.state }}</p>
              <p class="card-text"><strong>Country:</strong> {{ post.country }}</p>
            </div>
          </div>

          <p class="card-text">{{ post.description }}</p>

          <!-- Delete Button -->
          <button class="btn btn-danger" (click)="onDelete(i)">Delete</button>
        </div>
      </div>
    </div>
  </div>

  <div *ngIf="isLoading" class="text-center mt-3">
    <div class="spinner-border" role="status">
      <span class="sr-only">Loading...</span>
    </div>
  </div>

  <!-- Infinite Scroll -->
  <div (scroll)="onScroll()" style="height: 200px; overflow-y: scroll;">
  </div>
  </div>
  <ng-template #noDataMessage>
    <div class="text-center mt-3">
      <p>No tools are here.</p>
    </div>
  </ng-template>
</div>



